{% extends 'base/base.html' %}
{% block title %}Profile - {{ user.name }}{% endblock %}
{% block content %}
<div class="row mt-4">
    <div class="col-md-4">
        <div class="card bg-dark border-secondary text-center p-4 mb-3">
            {% if user.profile_picture %}
            <img src="{{ user.profile_picture.url }}" class="rounded-circle mx-auto mb-3" width="120" height="120" style="object-fit:cover">
            {% else %}
            <div class="rounded-circle bg-success d-flex align-items-center justify-content-center mx-auto mb-3" style="width:120px;height:120px;font-size:3rem;color:white">
                {{ user.name|first|upper }}
            </div>
            {% endif %}
            <h4>{{ user.name }}</h4>
            <span class="badge bg-{% if user.role == 'admin' %}danger{% elif user.role == 'creator' %}warning text-dark{% else %}secondary{% endif %} mb-2">{{ user.get_role_display }}</span>
            {% if user.bio %}<p class="text-muted small">{{ user.bio }}</p>{% endif %}
            <a href="{% url 'users:edit_profile' %}" class="btn btn-outline-success btn-sm">Edit Profile</a>
        </div>
    </div>
    <div class="col-md-8">
        <div class="card bg-dark border-secondary">
            <div class="card-body">
                <h5>Account Details</h5>
                <table class="table table-dark">
                    <tr><th>Email</th><td>{{ user.email }}</td></tr>
                    <tr><th>Member Since</th><td>{{ user.date_joined|date:"F Y" }}</td></tr>
                    <tr><th>Subscription</th><td>{% if user.has_active_subscription %}<span class="badge bg-warning text-dark">Premium</span>{% else %}<span class="badge bg-secondary">Free</span>{% endif %}</td></tr>
                    <tr><th>Playlists</th><td>{{ user.playlists.count }}</td></tr>
                </table>
                <a href="{% url 'users:change_password' %}" class="btn btn-outline-secondary btn-sm">Change Password</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
