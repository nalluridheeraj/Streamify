{% extends 'admin_panel/base.html' %}
{% block title %}Genres — Streamify Admin{% endblock %}
{% block nav_genres %}active{% endblock %}
{% block header_title %}Genres{% endblock %}
{% block content %}
<div class="page-header">
  <div class="page-header-left"><h1>Genres</h1><p>Manage content categories and genres</p></div>
  <div class="page-header-right"><a href="{% url 'admin_panel:create_genre' %}" class="btn btn-primary"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>New Genre</a></div>
</div>
<div class="panel">
  <table class="data-table">
    <thead><tr><th>Name</th><th>Slug</th><th>Content</th><th>Description</th><th style="text-align:right">Actions</th></tr></thead>
    <tbody>
      {% for genre in genres %}
      <tr>
        <td style="font-weight:500">{{ genre.name }}</td>
        <td><span class="badge badge-muted">{{ genre.slug }}</span></td>
        <td style="color:var(--muted-2)">{{ genre.content_count }}</td>
        <td style="font-size:12px; color:var(--muted); max-width:200px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">{{ genre.description|default:"—" }}</td>
        <td style="text-align:right;">
          <div style="display:flex; gap:6px; justify-content:flex-end;">
            <a href="{% url 'admin_panel:edit_genre' genre.pk %}" class="btn btn-ghost btn-sm btn-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></a>
            <form method="POST" action="{% url 'admin_panel:delete_genre' genre.pk %}" style="display:inline" onsubmit="return confirm('Delete {{ genre.name }}?')">{% csrf_token %}<button type="submit" class="btn btn-danger btn-sm btn-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/></svg></button></form>
          </div>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="5"><div class="empty-state"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg><p>No genres yet</p></div></td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
